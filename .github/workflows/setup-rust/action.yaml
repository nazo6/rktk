name: Setup Rust

description: "Setup Rust toolchain"

inputs:
  components:
    description: 'rustup components to install'
    required: true
  target:
    description: 'rustup target to install'
    required: true
  tools:
    description: 'tools to install'
    required: true

runs:
  using: "composite"
  steps:
  - uses: actions-rust-lang/setup-rust-toolchain@v1
    id: setup-rust
    with:
      toolchain: "nightly-2024-08-23"
      components: "${{ inputs.components }}"
      target: "${{ inputs.target }}"
      rustflags: ""
      cache: false
  - uses: Swatinem/rust-cache@v2

  - name: Install cargo deps
    uses: taiki-e/install-action@v2
    with:
      tool: "${{ inputs.tools }}"
